(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(36)},27:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(17),c=a.n(o),s=a(19),l=a(8),i=a(5),u=a(4),f=a.n(u),h=a(6),m=a(9),d=a(10),b=a(0),k="https://reactnd-books-api.udacity.com",v=localStorage.token;v||(v=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:v},E=function(){return fetch("".concat(k,"/books"),{headers:p}).then(function(e){return e.json()}).then(function(e){return e.books})},j=function(e,t){return fetch("".concat(k,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},g=function(e){return fetch("".concat(k,"/search"),{method:"POST",headers:Object(i.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})};a(27);var S=function(e){var t=e.book,a=e.resetShelf,n=function(){var e=Object(h.a)(f.a.mark(function e(n){var r,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.target.options,o=r[r.selectedIndex].value,e.next=4,j(t,o);case 4:a(o,t);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:t.imageLinks?"url(".concat(t.imageLinks.thumbnail,")"):""}}),r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement("select",{defaultValue:t.shelf||"none",onChange:n},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))),r.a.createElement("div",{className:"book-title"},t.title),t.authors&&t.authors.map(function(e,t){return r.a.createElement("div",{className:"book-authors",key:t},e)})))};var N=function(e){var t=e.title,a=e.books,n=e.resetShelf;return r.a.createElement("div",null,r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},t),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},a.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(S,{book:e,resetShelf:n}))})))))};var O=function(e){var t=e.books,a=e.resetShelf;return r.a.createElement("div",{className:"list-books-content"},r.a.createElement(N,{title:"Currently Reading",books:t.filter(function(e){return"currentlyReading"===e.shelf}),resetShelf:a}),r.a.createElement(N,{title:"Want to Read",books:t.filter(function(e){return"wantToRead"===e.shelf}),resetShelf:a}),r.a.createElement(N,{title:"Read",books:t.filter(function(e){return"read"===e.shelf}),resetShelf:a}))};var y=function(e){var t=e.books,a=e.resetShelf,n=Object(b.f)();return r.a.createElement("div",{className:"list-books"},r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,"MyReads")),r.a.createElement(O,{books:t,resetShelf:a}),r.a.createElement("div",{className:"open-search"},r.a.createElement("button",{onClick:function(){return n.push("/search")}},"Add a book")))};var w=function(e){var t=e.resetShelf,a=e.booksShelf,o=Object(n.useState)([]),c=Object(m.a)(o,2),s=c[0],l=c[1],i=Object(b.f)(),u=function(){var e=Object(h.a)(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.target.value)){e.next=8;break}return e.next=4,g(n);case 4:(r=e.sent).length>0?(r.forEach(function(e){a[e.id]&&(e.shelf=a[e.id])}),l(r)):l([]),e.next=9;break;case 8:l([]);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement("button",{className:"close-search",onClick:function(){return i.push("/")}},"Close"),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(e){return u(e)}}))),r.a.createElement("div",{className:"search-books-results"},r.a.createElement("ol",{className:"books-grid"},s.length>0&&s.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(S,{book:e,resetShelf:t}))}))))};var x=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)({}),u=Object(m.a)(c,2),k=u[0],v=u[1];Object(n.useEffect)(Object(h.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,o(t),p(t);case 5:case"end":return e.stop()}},e,this)})),[]);var p=function(e){var t={};e.forEach(function(e){t[e.id]=e.shelf}),v(t)},j=function(e,t){var n;if("none"===e&&k[t.id])return n=a.filter(function(e){return e.id!==t.id}),o(n),void v(Object(i.a)({},k,Object(l.a)({},t.id,"")));k[t.id]?n=a.map(function(a){return a.id===t.id?Object(i.a)({},a,{shelf:e}):a}):(t.shelf=e,n=Object(s.a)(a).concat([t])),o(n),v(Object(i.a)({},k,Object(l.a)({},t.id,e)))};return r.a.createElement(d.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/"},a.length>0&&r.a.createElement(y,{exact:!0,books:a,resetShelf:j})),r.a.createElement(b.a,{exact:!0,path:"/search"},r.a.createElement(w,{resetShelf:j,booksShelf:k})))))};a(34);c.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.7b5626f2.chunk.js.map